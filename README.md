# info-process

Copyright (c) 2025 [Antmicro](https://www.antmicro.com)

info-process is a tool processing [LCOV](https://github.com/linux-test-project/lcov)'s `.info` format.
Such files can be used in, e.g., [Coverview](https://github.com/antmicro/coverview) which is a tool for generating coverage dashboards.
The overview of the `.info` format is available in LCOV's `geninfo` manual page (`man geninfo`) in the `FILES` section and [online](https://manpages.debian.org/bookworm/lcov/geninfo.1.en.html#FILES).
Tool is aimed at working with coverage reports generated by running hardware simulations, for example in [Verilator](https://github.com/verilator/verilator).

## Prerequisites

Only Python 3 is required to run the script.

## Using the tool

An overview of available arguments and options can be printed with:

```bash
./info-process.py --help
```

Multiple modifications can be made to the input file by specifying multiple options, e.g.

```bash
./info-process.py --add-two-way-toggles --add-missing-brda-entries coverage-toggles.info
```

will modify the file in-place by adding `BRDA` entries for files with only `DA` entries and additionally covert those `BRDA` into separate entries with both the `0->1` and `1->0` toggle transitions.

### Modifying SF entries

Source file paths in `SF` entries (`SF:<PATH>`) can be stripped based on a regular expression provided with the `--strip-file-prefix <REGEX>` option.
Additionally, records for specific source files can be filtered out based on their paths matching a regular expression provided with the `--filter <REGEX>` option.
Please note that filtering is performed on stripped paths when these two options are used together.

For example, to strip `/root/designs/` prefixes from `SF` entries in a `coverage-toggles.info` file and only keep records for files from the `/root/designs/unit-tests` directory, one can run:

```bash
./info-process.py --filter 'unit-tests' --strip-file-prefix '.*/designs/' coverage-toggles.info
```
